# Brooks Optimal Strategy - OPTIMIZER WINNER
# Based on 730-day backtest optimization (2024-01-24 to 2026-01-23)
# Result: +213.16R, Sharpe 2.182, MaxDD -19.92R
#
# KEY CHANGES FROM SNIPER:
# - max_trades_per_day: 1 → 2 (+265% improvement)
# - cooldown_bars: 20 → 0 (Brooks principle: no synthetic cooldown)
# - All other parameters unchanged (already optimal)
#
# PERFORMANCE METRICS:
# - Net R: +213.16R (after costs)
# - Daily Sharpe: 2.182
# - Daily Sortino: 23.14
# - Max DD: -19.92R (-0.199% of 10k account)
# - Winrate: 41.6%
# - Profit Factor: 1.34
# - Trades: 1021 (over 730 days = 1.4/day avg)
# - Annual R est: +73.58R
#
# FTMO PROJECTIONS (10k Challenge):
# - Time to 10% target: ~73 days
# - Max daily loss risk: -0.2% (well within 5% limit)
# - Max total DD risk: -0.2% (well within 10% limit)

symbol: US500.cash

regime:
  enabled: true
  chop_threshold: 3.0  # CRITICAL: Prevents -45R DD events
  atr_period: 14
  range_period: 20
  # NOTE: Regime filter adds +94R vs regime OFF
  # Reduces max DD from -45R to -20R

trend:
  ema_period: 15       # Fast response to trend changes
  min_slope: 0.10      # Balanced trend detection

h2l2:
  pullback_bars: 3
  signal_close_frac: 0.35  # Strong rejection requirement
  min_risk_price_units: 2.5  # Larger stops for breathing room
  stop_buffer: 1.0
  cooldown_bars: 0  # OPTIMIZED: Was 20, now 0 (Brooks principle)
  # NOTE: Cooldown=0 adds +122R vs cooldown=20

guardrails:
  session_tz: America/New_York
  day_tz: America/New_York
  session_start: "09:30"
  session_end: "16:00"
  max_trades_per_day: 2  # OPTIMIZED: Was 1, now 2
  # NOTE: 2 trades/day adds +91R vs 1 trade/day

risk:
  risk_pct: 1.0  # Can reduce to 0.5% for extra FTMO safety

costs:
  per_trade_r: 0.04

# OPTIMIZER COMPARISON:
# Base (sniper):     +58.36R, Sharpe 1.080, 466 trades
# Optimal (this):  +213.16R, Sharpe 2.182, 1021 trades
# Improvement:     +154.80R (+265%), Sharpe +1.10

# CONFIGURATION HASH (for audit trail):
# Run: python -c "from strategies.config import StrategyConfig; print(StrategyConfig.load('config/strategies/us500_optimal.yaml').get_hash())"